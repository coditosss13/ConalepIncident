{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///home/miguel-angel/Documentos/GitHub/ConalepIncident/lib/api.js"],"sourcesContent":["const API_URL = process.env.NEXT_PUBLIC_API_URL || \"http://localhost:4000\"\n\n// Auth API\nexport async function login(usuario, password) {\n  const res = await fetch(`${API_URL}/api/auth/login`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ usuario, password }),\n  })\n\n  if (!res.ok) {\n    const error = await res.json()\n    throw new Error(error.message || \"Error en login\")\n  }\n\n  return res.json()\n}\n\nexport async function registerDocente(data) {\n  const res = await fetch(`${API_URL}/api/auth/register-docente`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify(data),\n  })\n\n  if (!res.ok) {\n    const error = await res.json()\n    throw new Error(error.error || \"Error en registro\")\n  }\n\n  return res.json()\n}\n\n// Incidencias API\nexport async function getIncidencias(token) {\n  const res = await fetch(`${API_URL}/api/incidencias`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n    },\n  })\n\n  if (!res.ok) throw new Error(\"Error al obtener incidencias\")\n\n  const data = await res.json()\n  return data.data || []\n}\n\nexport async function getIncidenciaById(id, token) {\n  const res = await fetch(`${API_URL}/api/incidencias/${id}`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n    },\n  })\n\n  if (!res.ok) throw new Error(\"Error al obtener incidencia\")\n\n  const data = await res.json()\n  return data.data\n}\n\nexport async function createIncidencia(formData, token) {\n  const res = await fetch(`${API_URL}/api/incidencias`, {\n    method: \"POST\",\n    headers: {\n      Authorization: `Bearer ${token}`,\n    },\n    body: formData,\n  })\n\n  if (!res.ok) {\n    const error = await res.json()\n    throw new Error(error.error || \"Error al crear incidencia\")\n  }\n\n  return res.json()\n}\n\n// Helper para guardar token\nexport function saveToken(token) {\n  if (typeof window !== \"undefined\") {\n    localStorage.setItem(\"token\", token)\n  }\n}\n\nexport function getToken() {\n  if (typeof window !== \"undefined\") {\n    return localStorage.getItem(\"token\")\n  }\n  return null\n}\n\nexport function removeToken() {\n  if (typeof window !== \"undefined\") {\n    localStorage.removeItem(\"token\")\n    localStorage.removeItem(\"userRol\")\n    localStorage.removeItem(\"userName\")\n  }\n}\n\nexport function saveUserData(rol, nombre) {\n  if (typeof window !== \"undefined\") {\n    localStorage.setItem(\"userRol\", rol.toString())\n    localStorage.setItem(\"userName\", nombre)\n  }\n}\n\nexport function getUserData() {\n  if (typeof window !== \"undefined\") {\n    return {\n      rol: localStorage.getItem(\"userRol\"),\n      nombre: localStorage.getItem(\"userName\"),\n    }\n  }\n  return { rol: null, nombre: null }\n}\n\n// Función para verificar permisos según rol\nexport function hasPermission(requiredRole) {\n  if (typeof window !== \"undefined\") {\n    const userRole = localStorage.getItem(\"userRol\")\n    // Administrador General (rol 1) tiene todos los permisos\n    if (userRole === \"1\") return true\n    // Docente (rol 2) puede registrar incidencias\n    if (userRole === \"2\" && requiredRole === \"registro\") return true\n    // Prefectura/Control Escolar (rol 3) puede validar y generar reportes\n    if (userRole === \"3\" && (requiredRole === \"validacion\" || requiredRole === \"reportes\")) return true\n    return false\n  }\n  return false\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAM,UAAU,QAAQ,GAAG,CAAC,mBAAmB,IAAI;AAG5C,eAAe,MAAM,OAAO,EAAE,QAAQ;IAC3C,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,eAAe,CAAC,EAAE;QACnD,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YAAE;YAAS;QAAS;IAC3C;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,QAAQ,MAAM,IAAI,IAAI;QAC5B,MAAM,IAAI,MAAM,MAAM,OAAO,IAAI;IACnC;IAEA,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,gBAAgB,IAAI;IACxC,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,0BAA0B,CAAC,EAAE;QAC9D,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;IACvB;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,QAAQ,MAAM,IAAI,IAAI;QAC5B,MAAM,IAAI,MAAM,MAAM,KAAK,IAAI;IACjC;IAEA,OAAO,IAAI,IAAI;AACjB;AAGO,eAAe,eAAe,KAAK;IACxC,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,gBAAgB,CAAC,EAAE;QACpD,SAAS;YACP,eAAe,CAAC,OAAO,EAAE,OAAO;QAClC;IACF;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;IAE7B,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,OAAO,KAAK,IAAI,IAAI,EAAE;AACxB;AAEO,eAAe,kBAAkB,EAAE,EAAE,KAAK;IAC/C,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,iBAAiB,EAAE,IAAI,EAAE;QAC1D,SAAS;YACP,eAAe,CAAC,OAAO,EAAE,OAAO;QAClC;IACF;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE,MAAM,IAAI,MAAM;IAE7B,MAAM,OAAO,MAAM,IAAI,IAAI;IAC3B,OAAO,KAAK,IAAI;AAClB;AAEO,eAAe,iBAAiB,QAAQ,EAAE,KAAK;IACpD,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,gBAAgB,CAAC,EAAE;QACpD,QAAQ;QACR,SAAS;YACP,eAAe,CAAC,OAAO,EAAE,OAAO;QAClC;QACA,MAAM;IACR;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,QAAQ,MAAM,IAAI,IAAI;QAC5B,MAAM,IAAI,MAAM,MAAM,KAAK,IAAI;IACjC;IAEA,OAAO,IAAI,IAAI;AACjB;AAGO,SAAS,UAAU,KAAK;IAC7B;;AAGF;AAEO,SAAS;IACd;;IAGA,OAAO;AACT;AAEO,SAAS;IACd;;AAKF;AAEO,SAAS,aAAa,GAAG,EAAE,MAAM;IACtC;;AAIF;AAEO,SAAS;IACd;;IAMA,OAAO;QAAE,KAAK;QAAM,QAAQ;IAAK;AACnC;AAGO,SAAS,cAAc,YAAY;IACxC;;IAUA,OAAO;AACT"}},
    {"offset": {"line": 128, "column": 0}, "map": {"version":3,"sources":["file:///home/miguel-angel/Documentos/GitHub/ConalepIncident/app/page.jsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect } from \"react\"\nimport { useRouter } from \"next/navigation\"\nimport { getToken } from \"@/lib/api\"\n\nexport default function HomePage() {\n  const router = useRouter()\n\n  useEffect(() => {\n    const token = getToken()\n    if (token) {\n      router.push(\"/dashboard\")\n    } else {\n      router.push(\"/login\")\n    }\n  }, [router])\n\n  return (\n    <div className=\"flex items-center justify-center min-h-screen bg-[#0c6857]\">\n      <div className=\"text-center\">\n        <h1 className=\"text-2xl font-bold mb-4 text-white\">Sistema de Incidencias Escolares</h1>\n        <p className=\"text-white/80\">Cargando...</p>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAJA;;;;;AAMe,SAAS;IACtB,MAAM,SAAS,IAAA,0LAAS;IAExB,IAAA,6PAAS,EAAC;QACR,MAAM,QAAQ,IAAA,iKAAQ;QACtB,IAAI,OAAO;YACT,OAAO,IAAI,CAAC;QACd,OAAO;YACL,OAAO,IAAI,CAAC;QACd;IACF,GAAG;QAAC;KAAO;IAEX,qBACE,yRAAC;QAAI,WAAU;kBACb,cAAA,yRAAC;YAAI,WAAU;;8BACb,yRAAC;oBAAG,WAAU;8BAAqC;;;;;;8BACnD,yRAAC;oBAAE,WAAU;8BAAgB;;;;;;;;;;;;;;;;;AAIrC"}},
    {"offset": {"line": 190, "column": 0}, "map": {"version":3,"sources":["file:///home/miguel-angel/Documentos/GitHub/ConalepIncident/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":"AAAAA,OAAOC,OAAO,GACZC,QAAQ,8JACRC,QAAQ,CAAC,YAAY,CAAEC,kBAAkB","ignoreList":[0]}}]
}